#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <string.h>
#include <conio.h>
#include <windows.h>
//게임 특징:
// 적을 처치하면서 탐험하는 턴제형 RPG
// 전투가 끝날 때마다 특수 능력이 있는 보물 획득
//플레이 캐릭터는 점점 늘어남

//전역변수 
	//적 레벨 설정(적 캐릭터는 점점 강해짐)
		int level=1; 
	//차례 카운트용 변수 선언 
		int turn;
	//플레이어 능력치용 변수 
		char act;
		int maxhp=100;
		int hp=100;
		int atk=5;
		int got[30];
	//적 캐릭터 능력치용 변수 
		int xhp;
		int xatk;
		char xname[100];
	//기타 변수
		int i;
		int j;
		int o;
		int k;
	//key관련 변수
		int scroll[20];
		int keyf;
		int skillkey[30];
void Enemy_act()
{
	i=rand()%4;
	//if(xname=="썩어가는 병사")
	//{
		printf("%s의 공격!",xname);
		printf("플레이어에게 %d만큼의 피해를 입혔다.\n",xname,xatk);
		hp-=xatk;
	//}
	Check();
}
void Check()
{
	if(maxhp<hp)
	{
		hp=maxhp;
	}
	i=0;
	keyf=0;
	while(i<=20)
	{
		if(scroll[i]==1)
		{
			skillkey[i]=67+keyf;
			keyf++;
		}
		i++;
	}
}
void skinf()
{
	printf("\t[\n");
	printf("\t 공격:A\n");
	printf("\t 휴식:B\n");
	
	
	
	printf("\t]");
}
int fight()
{
	printf("무엇을 하시겠습니까?\n");
	act=getch();
	Sleep(100);
	if(act==65)
		{
			printf("공격!\n");
			printf("%s에게 %d만큼의 피해를 입혔다.\n",xname,atk);
			xhp-=atk;
		}
	if(act==66)
		{
			printf("휴식...\n");
			printf("체력을 10 회복했다.\n");
			hp+=10;
		}
	if(got[0]==1)
	{
		if(act==81)
			{
				xhp-=atk*0.7;
				hp+=atk*0.2;
			}
	}
	Check();
	Sleep(100);
	Enemy_act();
}
int main()
{
	//랜덤 시드 설정
		srand(time(NULL));
	while (1)
	{
		if (level>20)
		{
			break;
		}
		else
		{
			//i=적 종류(일시적)
			i=rand()%level+1;
			if(i<99)
			{
				strcpy(xname,"썩어가는 병사");
				xhp=rand()%10+10;
				xatk=rand()%2+5;
			}
		}
			printf("%s가 나타났다!\n",xname);
			printf("  조작법:[행동:A,능력치 확인:B,기술 확인:C]\n");
			while(xhp>0)
			{	
			printf("정보를 확인하거나,행동을 준비하세요.\n");
			act=getch();
			Sleep(400);
			while (1)
			{
					if(act==65)
					{
						fight();
						break;
					}
					else if(act==66)
					{
						printf("내 최대 체력 : %d\n",maxhp);
						printf("내 체력 : %d\n",hp);
						printf("내 공격력 : %d\n",atk);
						printf("적 체력 : %d\n",xhp);
						printf("적 공격력 : %d\n",xatk);
						break;
					}
					else if(act==67)
					{
						skinf();
						break;
					}
				}
				getch();
				Sleep(400);
			}
		level++;
		printf("%s을 처치하는 데 성공했다.\n",xname);
		Sleep(1200);
	}
}
